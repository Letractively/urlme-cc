@model movies.Site.ViewModels.ViewModelBase

<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    
    <meta property='fb:admins' content='6207283' />
    @if (!string.IsNullOrWhiteSpace(Model.OpenGraphTitle)) { <meta property='og:title' content='@Model.OpenGraphTitle' /> }
    @if (!string.IsNullOrWhiteSpace(Model.OpenGraphImage)) { <meta property='og:image' content='@Model.OpenGraphImage' /> }
    <meta property='og:site_name' content='See It Or Not' />
    @*<meta property='og:url' content='http://www.thinlinebetween.com/creflo-a-balanced-look-at-his-ministry-and-why-many-despise-it/' />*@
    <meta property='og:type' content='website' />
    <meta property='fb:app_id' content='118119081645720'>

    <link rel="icon" href="~/content/favicon.jpg" />
    <script type="text/javascript">
        var apiBaseUrl = '@Url.Content("~/api/")';
    </script>
    <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/desktop-js-bundle")" type="text/javascript"></script>
    <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/desktop-css-bundle")" rel="stylesheet" />
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
    <script type="text/javascript">
        // var clip = new ZeroClipboard.Client();
        ZeroClipboard.setMoviePath('@Url.Content("~/scripts/plugins/zeroclipboard/zeroclipboard.swf")');
    </script>
    @RenderSection("ExtraHeadContent", required: false)

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-29837388-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    <script type="text/javascript">
        var uvOptions = {};
        (function () {
            var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
            uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/OMXCrkNwPgQu9xJ4X1IsA.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
        })();
    </script>
</head>

<body>
    <div id="fb-root"></div>
    <script>
    (function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=118119081645720";
    fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
    </script>
    @RenderBody()

    <script id="favoriteTheaterListTemplate" type="text/x-jquery-tmpl">
        {{#if $ctx.IsCurrentTheater(id) }}
            <a class="selected glowing" href="#" data-theaterid="{{=id}}">
        {{else}}
            <a href="#" data-theaterid="{{=id}}">
        {{/if}}
            <div class="favoriteLink lit"></div>
            <div class="theaterName">{{=$ctx.Snippet(name, 30)!}}</div>
        </a>
    </script>
    <script id="theaterListTemplate" type="text/x-jquery-tmpl">
        {{#if $ctx.IsCurrentTheater(id) }}
            <a class="selected glowing" href="#" data-theaterid="{{=id}}">
        {{else}}
            <a href="#" data-theaterid="{{=id}}">
        {{/if}}
            <div class="favoriteLink default"></div>
            <div class="theaterName">{{=$ctx.Snippet(name, 30)!}}</div>
        </a>
    </script>
    <script id="currentTheaterTemplate" type="text/x-jquery-tmpl">
        {{#if $ctx.IsCurrentTheater(id) }}
            <div class="theater selected rounded glowing" data-theaterid="{{=id}}">
        {{else}}
            <div class="theater rounded" data-theaterid="{{=id}}">
        {{/if}}    
            <div class="theaterNameAndFavorite">
                <h1>{{=name}}</h1><a class="favoriteLink {{=$ctx.GetFavoriteLinkClass(id)}}" href="#"></a>
            </div>
            <p class="address">{{=address}}</p>
            <div class="showtimeDays"></div>
            <div class="showHiddenMoviesLinkContainer {{#if numHiddenMovies}} {{else}} hidden {{/if}}"><a href="#" class="showHiddenMoviesLink">Show hidden movies (<span class="numHiddenMovies">{{=numHiddenMovies}}</span>)</a></div>
            {{#each movies}}
                <div class="movie rounded glowing gradient {{=movieClass}}" class="group" data-rtmovieid="{{=id}}">
                    <a href="/{{=movieSlug}}" class="group">                    
                        <img src="{{=imageUrl}}" />
                        <div class="details">
                            <h2>{{=title}}</h2><span class='mpaaRating'>{{=mpaaRating}}</span>
                            <p class="ratings small">
                                <span data-rtratingtitle="{{=criticsRating}}" class="rottenTomato icon"></span><span class="rt text">{{=criticsScore}}</span>
                                <span data-rtratingtitle="{{=audienceRating}}" class="rottenTomato icon"></span><span class="rt text">{{=audienceScore}}</span>
                                <span class='imdb icon'></span><span class="text">{{=IMDbRating}}</span>
                            </p> 
                            <p>{{=duration}}</p> 
                        </div>
                    </a>
                    <p class="showtimes">{{=showtimesHtml!}}</p>
                    <div class="actions">
                        <a href="#" title="Hide this movie" class="hideMovieLink rounded" data-theatermovie="{{=$parent.parent.data.id}}-{{=id}}"><span class="x">&#10006;</span>Hide</a>
                    </div>
                </div>
            {{/each}}
        </div>
    </script>
</body>
</html>
