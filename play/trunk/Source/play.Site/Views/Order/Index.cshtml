@model play.Site.Models.PlayOrder

@{
    ViewBag.Title = "Index";
}

@section desktopBody {
    @{ Html.RenderPartial("OrderForm", "dt"); }
}

@section mobileBody {
    @{ Html.RenderPartial("OrderForm", "m"); }
}

@section scripts {
<script>
    $(function () {
        $(".buttonset").buttonset();

        // bind controls

        // change play date, deselect all selections in document
        $("input[name='playDate']").change(function () {
            document.getSelection().removeAllRanges();
        });

        // click a counter up/down (+/-) button
        $(".countButton").click(function (e) {
            e.preventDefault();
            var btn = $(this);
            var countUp = btn.hasClass("countUp");
            var counter = btn.closest(".counter");
            var display = $("." + counter.attr("data-display-class"));
            var total = $("#" + counter.attr("data-total-id"));
            var pricePer = parseInt($("#" + counter.attr("data-price-per-id")).text());
            var currentCount = parseInt(display.first().text());
            if (!currentCount && !countUp)
                return; // zero. can't get lower than zero.
            if (countUp) {
                currentCount++;
            } else {
                currentCount--;
            }
            display.text(currentCount);
            total.text(currentCount * pricePer);
        });
    });
</script>
}
