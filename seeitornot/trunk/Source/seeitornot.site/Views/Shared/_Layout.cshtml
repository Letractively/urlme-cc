@{ 
    // figure out mobile vs. desktop
    var platform = Request.UserAgent.ToString().ToLower().Contains("mobi") ? "m" : "dt";
    var platFormOverrideCookieName = "platformOverride";
    string platformOverride = Request.Cookies[platFormOverrideCookieName] == null ? null : Request.Cookies[platFormOverrideCookieName].Value;
    if (platformOverride != null) {
        platform = platformOverride;
    }
    
    bool isMobile = platform == "m";
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>@ViewBag.Title</title>
    <link rel="icon" href="~/content/favicon.jpg" />
    @Styles.Render("//cdn.ianhd.com/css/common.css")
    @Styles.Render("~/Content/css")
    @Html.Partial("BeforeEndHead")
</head>
<body class="@platform">
    @Html.Partial("AfterBody")
    <header class="orangeDiag group">
        <div class="content group">
            <a id="logo" href="~/"></a>
            <div id="fbLikeContainer">@Html.Partial("FacebookLike")</div>
        </div>
    </header>
    <div id="navBar" class="greenGradient">
        <div class="content group">
            <nav>
                <ul>
                    <li><a class="selected" href="~/">What's Hot</a></li>
                    <li><a href="~/showtimes">Showtimes</a></li>
                    <li><a class="noPush" href="~/reviews">Reviews</a></li>
                    <li><a class="noPush" href="~/about">About</a></li>
                </ul>
            </nav>
            <div id="searchContainer"><input type="text" /></div>
        </div>
    </div>
    @RenderBody()

    @* switch to different platform *@
    @{ 
        var switchTo = isMobile ? "desktop`dt" : "mobile`m";
        var parts = switchTo.Split('`');
        var label = parts[0];
        var cookieValue = parts[1];
    }
    Switch to <a href="#" onclick="$.cookie('@platFormOverrideCookieName','@cookieValue'); location.reload(true); return false;">@label</a>

    @Scripts.Render("~/bundles/js/jquery")
    @Scripts.Render("~/bundles/js/plugins")
    @RenderSection("scripts", required: false)
</body>
</html>
